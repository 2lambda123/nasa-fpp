=== State Definition

A *state definition* specifies a state in a 
<<Definitions_State-Machine-Definitions,state machine>>  

==== Syntax

`state` <<Lexical-Elements_Identifiers,_identifier_>>
_[_ `{` _state_sequence_ `}` _]_

_state-sequence_ is an 
<<Element-Sequences,element sequence>> in
which each element is a *state member*,
and the terminating punctuation is a semicolon.
A state member is one of the following

* A <<State-Machine-Behavior_State-Definition,state definition>>
* A <<State-Machine-Behavior_State-Junction,state junction>>
* A <<State-Machine-Behavior_State-Initial,state initial>>
* A <<State-Machine-Behavior_State-Transition,state transition>>


==== Semantics

. The _identifier_ specifies the name of a state in the state machine

. The state can be hierarchical, a state can be defined within another state

. The state is required to have one _initial_ specification if it is a hierarchical state

. The state can have _junctions_

. All _transitions_ that originate from a state are required to be specified inside that state

==== Examples

[source,fpp]
----
state machine MonitorSm {

  event Complete
  event Drive
  event Calibrate
  event RTI
  event Stop
  event Fault
  
  action init2
  action doCalibrate
  action motorControl
  action reportFault

  guard calibrateReady

  initial DEVICE_ON
  
  state DEVICE_ON {

    initial INITIALIZING do init2

    state INITIALIZING {
      on Complete visit IDLE
    }

    state IDLE {
      on Drive visit DRIVING
      on Calibrate if calibrateReady visit CALIBRATING
    }

    state CALIBRATING {
      on RTI do doCalibrate
      on Fault visit Idle do reportFault
      on Complete visit IDLE
    }

    state DRIVING {
      on RTI do motorControl
      on Stop visit IDLE
    }

  }

}
----
