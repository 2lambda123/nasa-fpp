=== State Definition

A *state definition* specifies a state in a 
<<Definitions_State-Machine-Definitions,state machine>>  

==== Syntax

`state` <<Lexical-Elements_Identifiers,_identifier_>>
_[_ `{` _state_sequence_ `}` _]_

_state-sequence_ is an 
<<Element-Sequences,element sequence>> in
which each element is a *state member*,
and the terminating punctuation is a semicolon.
A state member is one of the following

* A <<State-Machine-Behavior_State-Definition,state definition>>
* A <<State-Machine-Behavior_State-Junction,state junction>>
* A <<State-Machine-Behavior_State-Transition,state transition>>


==== Semantics

. The _identifier_ specifies the name of a state in the state machine

. The state can be hierarchical, a state can be defined within another state

. The state is required to have one _initial_ specification if it is a hierarchical state

. The state can have _junctions_

. All _transitions_ from a state are required to be specified inside the state


==== Examples

[source,fpp]
----
state machine MonitorSm {

    event Complete
    event Drive
    event Calibrate
    event RTI
    event Stop
    event Fault
    
    action init2
    action doCalibrate
    action motorControl

    guard calibrateReady

    
    state DeviceOn {

        initial Initializing do init2

        state Initializing {
            on Complete go Idle
        }

        state Idle {
            on Drive go Driving
            on Calibrate if calibrateReady go Calibrating
        }

        state Calibrating {
            on RTI do doCalibrate
            on Fault go Idle do reportFault
            on Complete go Idle
        }

        state Driving {
            on RTI do motorControl
            on Stop go Idle
        }

    }

}
----
