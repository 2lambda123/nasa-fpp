{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "link to file in github repo?",
    "title": "FPP JSON Dictionary JSON Schema",
    "description": "JSON Schema for FPP JSON dictionaries",
    "type": "object",
    "$defs": {
        "typeName": {
            "type": "object",
            "properties": {
                "name": {"type": "string"},
                "kind": {"type": "string", "kind": ["integer", "float", "bool", "string", "qualifiedIdentifier"]},
                "size": {"type": "number"},
                "signed": {"type": "boolean"}
            }
        },
        "formalParameter": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "description": {"type": "string"},
                "type":  { "$ref": "#/$defs/typeName" },
                "ref": {"type": "boolean"}
            }
        }
    },
    "properties": {
        "metadata": {
            "type": "object",
            "properties": {
                "deploymentName" : {"type": "string"},
                "frameworkVersion" :  {"type": "string"},
                "projectVersion": {"type": "string"},
                "libraryVersions" : {
                    "type": "array",
                    "items": {"type": "string"}
                },
                "dictionarySpecVersion" :  {"type": "string"}
            }
        },
        "typeDefinitions":  {
            "type": "array", 
            "items": { 
                "anyOf": [
                    {
                        "type": "object",
                        "properties": {
                            "kind" : {"type": "string", "enum": ["array"]},
                            "qualifiedName" :  {"type": "string"},
                            "size": {"type": "number"},
                            "elementType" : { "$ref": "#/$defs/typeName" },
                            "default" :  {"type": "array"}
                        }
                    }, 
                    {
                        "type": "object",
                        "properties": {
                            "kind" : {"type": "string", "enum": ["enum"]},
                            "qualifiedName" :  {"type": "string"},
                            "representationType": { "$ref": "#/$defs/typeName" },
                            "identifiers" : {
                                "type": "object",
                                "properties": {
                                    "_placeholder": {"type": "number"}
                                },
                                "additionalProperties": true
                            },
                            "default" : {"type": "string"}
                        }
                    }, 
                    {
                        // need to add struct
                        "type": "object",
                        "properties": {
                            "type": { "$ref": "#/$defs/typeName" },
                            "index": {"type": "number"},
                            "size": {"type": "number"},
                            "format": {"type": "string"}
                        }
                    }
                ]
            } 
        },
        "commands":  {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {"type": "string"},
                    "commandKind": {"type": "string"},
                    "opcode": {"type": "number"},
                    "description": {"type": "string"},
                    "formalParams": {"type":"array", "items":  { "$ref": "#/$defs/typeName" }},
                    "priority": {"type": "number"},
                    "queueFullBehavior": {"type": "string", "enum": ["assert", "block", "drop"]}
                }
            }
        },
        "parameters": {
            "type": "array", 
            "items": {
                "type": "object",
                "properties": {
                    "name": {"type": "string"},
                    "description": {"type": "string"},
                    "type": { "$ref": "#/$defs/typeName" },
                    "default": {"type": ["number", "string", "boolean", "object", "array"]},
                    "id": {"type": "number"}
                }
            }
        },
        "events":  {
            "type": "array", 
            "items": {
                "type": "object",
                "properties": {
                    "name": {"type": "string"},
                    "description": {"type": "string"},
                    "severity": {"type": "string", "enum": ["ACTIVITY_HIGH", "ACTIVITY_LOW", "COMMAND", "DIAGNOSTIC", "FATAL", "WARNING_HIGH", "WARNING_LOW"]},
                    "formalParams": {"type":"array", "items": { "$ref": "#/$defs/formalParameter" }},
                    "id": {"type": "number"},
                    "format": {"type": "string"},
                    "throttle": {"type": "number"}
                }
            }
        },
        "telemetryChannels":  {
            "type": "array", 
            "items": {
                "type": "object",
                "properties": {
                    "name": {"type": "string"},
                    "description": {"type": "string"},
                    "type": { "$ref": "#/$defs/typeName" },
                    "id": {"type": "number"},
                    "telemetryUpdate": {"type": "string", "enum": ["always", "onchange"]},
                    "format": {"type": "string"},
                    "limit": {
                        "type": "object",
                        "properties": {
                            "high": {
                                "type": "object",
                                "properties": {
                                    "yellow": {"type": "number"},
                                    "orange": {"type": "number"},
                                    "red": {"type": "number"}
                                }
                            },
                            "low": {
                                "type": "object",
                                "properties": {
                                    "yellow": {"type": "number"},
                                    "orange": {"type": "number"},
                                    "red": {"type": "number"}
                                }
                            }
                        }
                    }
                }
            }
        },
        "records":  {
            "type": "array", 
            "items": {
                "type": "object",
                "properties": {
                    "name": {"type": "string"},
                    "description": {"type": "string"},
                    "type": { "$ref": "#/$defs/typeName" },
                    "array": {"type": "boolean"},
                    "id": {"type": "number"}
                }
            }
        },
        "containers":  { 
            "type": "array", 
            "items": {
                "type": "object",
                "properties": {
                    "name": {"type": "string"},
                    "description": {"type": "string"},
                    "id": {"type": "number"},
                    "defaultPriority": {"type": "number"}
                }
            }
        }
    }
  }
  