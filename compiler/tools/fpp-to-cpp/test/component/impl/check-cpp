#!/bin/sh

# ----------------------------------------------------------------------
# Compile ref C++ files, to check them for validity
# ----------------------------------------------------------------------

fprime_gcc=../../../../../scripts/fprime-gcc
export FPRIME_GCC_FLAGS="-I../../fprime"
warning_flags="
-Wno-gnu-zero-variadic-macro-arguments
-Wno-return-type
-Wno-unused-parameter
"

. ../generate_cpp.sh

echo "generating base class headers"
for file in `ls ../base/*Ac.ref.hpp`
do
  base=`basename $file .ref.hpp`
  cp $file $base.hpp
done

for file in `ls *.template.ref.cpp`
do
  base=`basename $file .template.ref.cpp`
  cp $base.template.ref.hpp $base.hpp
  cp $base.template.ref.cpp $base.cpp
  echo "compiling $base.cpp"
  $fprime_gcc -I../../../.. -I.. -c $base.cpp $warning_flags
done
