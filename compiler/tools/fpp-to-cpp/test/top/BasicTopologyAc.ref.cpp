// ====================================================================== 
// \title  BasicTopologyAc.cpp
// \author Generated by fpp-to-cpp
// \brief  cpp file for Basic topology
//
// \copyright
// Copyright (c) 2021 California Institute of Technology.
// U.S. Government sponsorship acknowledged.
// All rights reserved.
// ======================================================================

#include "BasicTopologyAc.hpp"

namespace M {

  namespace {

    // ----------------------------------------------------------------------
    // Component configuration objects
    // ----------------------------------------------------------------------

    namespace ConfigObjects {

      namespace c1 {
        U32 x = 0;
      }

    }

    // ----------------------------------------------------------------------
    // Component instances
    // ----------------------------------------------------------------------

    // c1
    C1 c1();

    // c2
    C2 c2(FW_OPTIONAL_NAME("c2"));

    // c3
    C2 c3(FW_OPTIONAL_NAME("c3"));

    // ----------------------------------------------------------------------
    // Private functions
    // ----------------------------------------------------------------------

    // Initialize components
    void initComponents(const TopologyState& state) {
      c1.init(QueueSizes::c1, InstanceIDs::c1);
      c2.init(InstanceIDs::c2);
      c3.init();
    }

    // Configure components
    void configComponents(const TopologyState& state) {
      c1.config();
    }

    // Set component base IDs
    void setBaseIds() {
      c1.setidBase(0x100);
      c2.setidBase(0x200);
      c3.setidBase(0x300);
    }

    // Connect components
    void connectComponents() {

      // C
      c2.set_p_OutputPort(
        0,
        c1_get_p_InputPort(0)
      );

    }

  }

}
