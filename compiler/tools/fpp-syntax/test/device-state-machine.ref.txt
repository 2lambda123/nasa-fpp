def struct
  ident FaultData
  struct type member
    ident id
    type name U32
  struct type member
    ident data
    type name U32
def struct
  ident PowerData
  struct type member
    ident level
    type name F32
def state machine
  ident Device
  def signal
    ident RTI
  def signal
    ident Complete
  def signal
    ident Calibrate
  def signal
    ident Fault
    typeName qual ident FaultData
  def signal
    ident Drive
  def signal
    ident Stop
  def signal
    ident Resume
  def signal
    ident POR
  def signal
    ident PowerOn
    typeName qual ident PowerData
  def signal
    ident PowerOff
  def action
    ident init1
  def action
    ident init2
  def action
    ident setPower
    typeName qual ident PowerData
  def action
    ident initPower
  def action
    ident reportFault
    typeName qual ident FaultData
  def action
    ident motorControl
  def action
    ident doCalibrate
  def action
    ident doSafe
  def action
    ident doDiagnostics
  def guard
    ident coldStart
  def guard
    ident noRecovery
    typeName qual ident FaultData
  def guard
    ident calibrateReady
  spec initial
    action ident init1
    state qual ident j1
  def junction
    ident j1
    guard ident coldStart
    state qual ident DEVICE_OFF
    action ident initPower
    state qual ident DEVICE_ON
  def state
    ident DEVICE_OFF
    spec transition
      signal ident PowerOn
      action ident setPower
      state qual ident DEVICE_ON
  def state
    ident DEVICE_ON
    spec initial
      action ident init2
      state qual ident INITIALIZING
    def state
      ident INITIALIZING
      spec transition
        signal ident Complete
        state qual ident IDLE
    def state
      ident IDLE
      spec transition
        signal ident Drive
        state qual ident DRIVING
      spec transition
        signal ident Calibrate
        guard ident calibrateReady
        state qual ident CALIBRATING
    def state
      ident Calibrating
      spec transition
        signal ident RTI
        action ident doCalibrate
      spec transition
        signal ident Fault
        action ident reportFault
        state qual ident IDLE
      spec transition
        signal ident Complete
        state qual ident IDLE
    def state
      ident DRIVING
      spec transition
        signal ident RTI
        action ident motorControl
      spec transition
        signal ident Stop
        state qual ident IDLE
    spec transition
      signal ident POR
      state qual ident DEVICE_ON
    spec transition
      signal ident Fault
      state qual ident j2
    spec transition
      signal ident PowerOff
      state qual ident DEVICE_OFF
  def junction
    ident j2
    guard ident noRecovery
    state qual ident DIAGNOSTICS
    action ident reportFault
    state qual ident RECOVERY
  def state
    ident Recovery
    spec transition
      signal ident RTI
      action ident doSafe
    spec transition
      signal ident Complete
      state qual ident DIAGNOSTICS
  def state
    ident DIAGNOSTICS
    spec transition
      signal ident RTI
      action ident doDiagnostics
    spec transition
      signal ident Resume
      state qual ident DEVICE_ON
