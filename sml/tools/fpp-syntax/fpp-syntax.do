#!/bin/sh -e

# ----------------------------------------------------------------------
# fpp-syntax.do 
# ----------------------------------------------------------------------

. ./defs.sh

redo-always
struct_name=`grep '^ *structure' < $2.sml | awk '{ print $2 }'`
ml-build $2.cm $struct_name.main $2 1>&2
suffix=`ls $2.*-* | sed 's/^.*\.//'`

echo '#!/bin/sh

# ----------------------------------------------------------------------
# '$base'
# ----------------------------------------------------------------------

'$SMLNJ_HOME'/bin/.run/run.'$suffix' @SMLcmdname='$2' @SMLload='`pwd`/$2.$suffix' "$@"' > $3

chmod +x $3
